# blog

![](https://img.shields.io/badge/build-pass-blue) ![mod](https://img.shields.io/badge/module-landers1037/blogo-green) ![](https://img.shields.io/badge/runtest-pass-brightgreen) ![](https://img.shields.io/badge/benchmark-11.4k/s-brightgreen)

`blog` is a go&amp;vue blog using markdown

`blog`æ˜¯ä¸€ä¸ªåŸºäºgoçš„åç«¯markdownæ¸²æŸ“æœåŠ¡ï¼Œæ­é…vueå®ç°çš„å‰ç«¯é¡µé¢å…±åŒç»„æˆä¸€ä¸ªå®Œæ•´çš„ä¸ªäººåšå®¢å‘å¸ƒæœåŠ¡

æ—¨åœ¨æä¾›markdownæ–‡æœ¬çš„åšå®¢éƒ¨ç½²æœåŠ¡

å¦‚æœä½ åœ¨ä½¿ç”¨markdownå†™ä½œ è¯·å°è¯•ä½¿ç”¨æœ¬æœåŠ¡

## å®‰è£…

```bash
go get github.com/landers1037/blogo
```

ç¨‹åºä¼šå®‰è£…åˆ°`$GOPATH/bin/blogo`

## å¿«é€Ÿå¼€å§‹

ä½¿ç”¨dockerå¿«é€Ÿå¼€å§‹ä½ çš„ä¸ªäººåšå®¢ä¹‹æ—…

[å¦‚ä½•åˆ›å»ºä¸€ä¸ªblogå®¹å™¨](quick_start.md)

## å¼€å‘è®°å½•

[records](record/record.md)

## Changelog

[æ›´æ–°æ—¥å¿—](CHANGELOG.md)

## å›¾ç¤º

![index](record/index.png)

![post](record/post.png)

![search](record/search.png)

![chart](record/chart.png)

![](record/running.png)

## ç‰¹æ€§ğŸ›¸

- å®Œæ•´çš„è¿ç§»å·¥å…·é“¾ ä¸ç®¡ä½ æ˜¯ä½¿ç”¨çº¯å‡€çš„markdownè¿˜æ˜¯hexoæ ¼å¼md
- markdownæ–‡æœ¬çš„è¯­æ³•é«˜äº®æ”¯æŒ
- é«˜çº§ç»Ÿè®¡åŠŸèƒ½ æ”¯æŒç»Ÿè®¡æ€»è®¿é—®é‡ï¼Œæ–‡ç« è®¿é—®é‡ï¼Œæ–‡ç« åˆ†äº«é‡ï¼Œæ–‡ç« ç‚¹èµé‡
- æ”¯æŒåšå®¢ç•™è¨€ æ–‡ç« çš„è¯„è®ºåŠŸèƒ½
- æ”¯æŒå¤šç§æ’åºå‡†åˆ™ å¯ä»¥æŒ‰ç…§è‡ªå·±çš„æ–¹å¼é€‰æ‹©æƒ³è¦çš„æ–‡ç« æ˜¾ç¤ºé¡ºåº
- å®Œå–„çš„åå°ç®¡ç†é¡µé¢ï¼Œæ–¹ä¾¿ç®¡ç†è€…ç®¡ç†æ•°æ®
- æ”¯æŒæ–°æ–‡ç« çš„ä¸Šä¼ å’Œæ–‡ç« çš„å¯¼å‡ºåŠŸèƒ½ éšæ—¶å¤‡ä»½ä½ çš„åšå®¢
- å¤šæ•°æ®åº“æ”¯æŒ å…³ç³»å‹æ•°æ®åº“ï¼ˆsqliteï¼Œmysqlï¼‰
- ç¼“å­˜æ”¯æŒ æ”¯æŒredisç¼“å­˜ åæœŸå°†æ›´æ¢ä¸ºæˆ‘çš„å¼€æºé¡¹ç›®[Plnack](https://github.com/landers1037/plnack)
- æ–°ç‰¹æ€§.envå®šåˆ¶ç¯å¢ƒå˜é‡
- å‰ç«¯æ”¯æŒå®šåˆ¶é¡µé¢ å®šåˆ¶ä¸åŒåŒºåŸŸçš„æ˜¾ç¤ºæ•ˆæœ

æœ¬æœåŠ¡å‰ç«¯ä¾èµ–nginxæœåŠ¡æˆ–è€…å…¶ä»–é™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œå¦‚æœä½ åªæƒ³è¦ç›´æ¥è¿è¡Œï¼Œè¯·cloneæœ¬åº“çš„br_ngåˆ†æ”¯

br_ngåˆ†æ”¯æä¾›äº†é™æ€æ–‡ä»¶çš„ç›´æ¥ä»£ç†

## ä½¿ç”¨ğŸ¦„ï¸

å¯åŠ¨æœ¬æœåŠ¡ï¼Œä½ å¯ä»¥åœ¨releaseé¡µé¢ä¸‹è½½æœ¬æœåŠ¡åŒ…ï¼Œæ‹·è´åˆ°ä½ çš„æœåŠ¡å™¨ä¸Šæˆ–è€…æœ¬æœºè¿è¡Œ

> æ³¨æ„ï¼šwin_amd64ç‰ˆæœ¬ä¸æ”¯æŒéœ€è¦linuxç‰¹æ€§ï¼Œä»…å¯ä½œä¸ºæœ¬åœ°è°ƒè¯•ä½¿ç”¨

```bash
unzip blog_xxx.zip
cd blog_xxx
chmod +x blog
./blog
```

æœåŠ¡åŒ…å†…é¢„ç½®äº†ç¨‹åºå¯åŠ¨éœ€è¦çš„é…ç½®æ–‡ä»¶ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰æ­¤æ–‡ä»¶ä»¥å®ç°ä¸åŒçš„é…ç½®

### å‘½ä»¤

æœ¬æœåŠ¡å†…ç½®äº†æ–¹ä¾¿ç›´æ¥ä½¿ç”¨çš„å‘½ä»¤ï¼ˆä»…æ”¯æŒunixï¼‰

```bash
./app_blog -h # æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
NAME:
   blog - powerful markdown-based blog

USAGE:
   app_blog [global options] command [command options] [arguments...]

VERSION:
   v6.0

DESCRIPTION:
   ä¸€ä¸ªåŸºäºmarkdownæ–‡æ¡£çš„åŠ¨æ€åšå®¢éƒ¨ç½²å·¥å…·

AUTHORS:
   Landers <liaorenj@gmail.com>
   wxk <xk_wang@qq.com>

COMMANDS:
   help, h  Shows a list of commands or help for one command
   App configs:
     config, conf, c  åº”ç”¨é…ç½®
   Run a web service:
     web, w, serve, server  å¯åŠ¨blogçš„webæœåŠ¡
   Service manager:
     service, s  æœåŠ¡ç®¡ç†
   Tools of blog:
     tool, t  åšå®¢é…å¥—å·¥å…·

GLOBAL OPTIONS:
   --help, -h     show help (default: false)
   --version, -v  print the version (default: false)

COPYRIGHT:
   renj.io 2021.
```

å®Œæ•´çš„ç°ä»£åŒ–CLIå·¥å…·æ”¯æŒ

å½“`cluster`ä¸º`1`æ—¶ ä½¿ç”¨é›†ç¾¤æ¨¡å¼ï¼Œæ­¤æ—¶æœåŠ¡å°†æ”¯æŒä½¿ç”¨`-p`å‚æ•°ç›‘å¬å¤šä¸ªç«¯å£å¯åŠ¨å¤šä¸ªå­å®ä¾‹çº¿ç¨‹

å¦‚ï¼š

```bash
# ./app_blog web cluster -h
NAME:
   blog web cluster - é›†ç¾¤æ¨¡å¼å¯åŠ¨æœåŠ¡

USAGE:
   blog web cluster [command options] [arguments...]

CATEGORY:
   Run a web service

OPTIONS:
   --port value, -p value  è®¾ç½®å¯åŠ¨ç«¯å£ (default: "5000")
   --conf value, -c value  è®¾ç½®é…ç½®æ–‡ä»¶è·¯å¾„ (default: "conf/app.ini")
   --help, -h              show help (default: false)
# ä¾‹å¦‚   
./blog web cluster -p "8888 9999"
# æœåŠ¡å°†è¿è¡Œç›‘å¬äºç«¯å£8888 9999
```

#### å¯åŠ¨æœåŠ¡

```bash
./blog web start
# æ­¤å‘½ä»¤å°†å¯åŠ¨åå°æœåŠ¡ï¼Œæ—¥å¿—è®°å½•äºé…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„è·¯å¾„ è¿›ç¨‹pidåŒ
```

#### æŒ‡å®šç«¯å£å¯åŠ¨

```bash
./blog web start -p 9000
```

#### æŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨

é»˜è®¤çš„é…ç½®æ–‡ä»¶æ˜¯`conf/app.ini` é€šè¿‡-cå‚æ•°å¯ä»¥æŒ‡å®šé…ç½®æ–‡ä»¶

```bash
./blog web start -c /etc/test.ini
```

```bash
#./blog web start -h
NAME:
   blog web start - æ­£å¸¸æ¨¡å¼å¯åŠ¨æœåŠ¡

USAGE:
   blog web start [command options] [arguments...]

CATEGORY:
   Run a web service

OPTIONS:
   --port value, -p value  è®¾ç½®å¯åŠ¨ç«¯å£ (default: 5000)
   --conf value, -c value  è®¾ç½®é…ç½®æ–‡ä»¶è·¯å¾„ (default: "conf/app.ini")
   --help, -h              show help (default: false)
```

#### åœæ­¢æœåŠ¡

åŸºäºlinuxç‰¹æ€§çš„pid killæ–¹å¼åœæ­¢

```bash
./blog service stop
```

#### é‡å¯æœåŠ¡

```bash
./blog service restart
```

#### ~~é‡è½½é…ç½®æ–‡ä»¶(åºŸå¼ƒ)~~

```bash
./blog -r
```

#### æµ‹è¯•æ¨¡å¼

```bash
./blog web test
# ä¸€èˆ¬ç”¨äºè°ƒè¯•æ—¶ä½¿ç”¨ æµ‹è¯•æ¨¡å¼ä¸‹ç›‘å¬äº5000ç«¯å£
```

### å·¥å…·é›†åˆ

```bash
NAME:
   blog tool - åšå®¢é…å¥—å·¥å…·

USAGE:
   blog tool command [command options] [arguments...]

COMMANDS:
   help, h  Shows a list of commands or help for one command
   Tools of blog:
     db       åˆå§‹åŒ–æ•°æ®åº“
     conf     åˆå§‹åŒ–é…ç½®
     new      æ–°å»ºæ–‡æ¡£
     temp     ä¿®æ”¹æ¨¡æ¿
     migrate  è¿ç§»é“¾æ¥[æ—§] [æ–°]

OPTIONS:
   --help, -h  show help (default: false)
```



#### æ–°å»ºæ–‡æ¡£

```bash
./app_log tool new æ–‡æ¡£å
```

#### ç”Ÿæˆé…ç½®

```bash
./app_blog tool conf
```

#### ä¿®æ”¹æ–‡æ¡£æ¨¡æ¿

æ¨¡æ¿é»˜è®¤ä¼šä¿å­˜åœ¨`/etc/blog.meta`ä¸­

```bash
./app_blog tool temp

# é»˜è®¤çš„æ¨¡æ¿
---
title: %s
name: %s
date: %s
tags: []
categories: []
abstract:
---
<!--more-->
```

#### è¿ç§»é“¾æ¥

é€šç”¨çš„å­—ç¬¦ä¸²æ›¿æ¢å·¥å…· å¯ä»¥ç”¨äºæ›¿æ¢å›¾åºŠçš„åœ°å€

```bash
./app_blog tool migrate old new
```



## é…ç½®æ–‡ä»¶ğŸ”¨

æœ¬æœåŠ¡çš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸º`conf/app.ini`

å¦‚ä¸‹ï¼š

```ini
# config for app
# mode can be debug/release
[mode]
RUN_MODE = debug

[run]
APP_NAME = blog
APP_PID = blog.pid
APP_LOG = blog.log
APP_LOG_LEVEL = error
APP_LOG_FILE = app.log
APP_LOG_ENABLE = 1

[app]
PAGE_SIZE = 8
MESSAGE_SIZE = 5
SORT_POST_BY = id
SORT_POST_REVERSE = 1
SORT_MESSAGE_BY = id
SORT_MESSAGE_REVERSE = 1
SORT_COMMENT_BY = id
SORT_COMMENT_REVERSE = 1
USE_CONTENT_AS_ABS = 1
MAX_CONTENT_LENGTH = 120
CUSTOM_EMPTY_ABS = <code>Sorry</code>è¯¥æ–‡ç« æš‚æ— æ¦‚è¿°
FAKE_STATIC_URL = 0
ZHUANLAN_ID = 1
JWT_SECRET = 10086call
APP_REFER = blog.renj.io
APP_HOST = 127.0.0.1
APP_DOMAIN = blog.renj.io
APP_ALLOW_IE = 0

[server]
HTTP_PORT = 5000
READ_TIMEOUT = 60
WRITE_TIMEOUT = 60
CLUSTER = 1
STATIC_ROUTER = 0
HIDE_DB_LOG = 1

[admin]
USERNAME = admin
PASSWD = 12345
COOKIE_MAX_AGE = 3600

[mysql]
TYPE = mysql
USER = root
PASSWORD = 123456
HOST = 127.0.0.1:3306
NAME= blog
TABLE_PREFIX = blog_

# where db is
[sqlite]
DB = blog.db

# if use middleware set 1
[middle]
UV = 1
POSTVIEW = 1
SIMPLEAUTH = 0
USEREDIS = 0
CORS = 1
TRY_FILE = 0
TRY_FILE_INDEX = dist/index.html

[redis]
Host = 127.0.0.1:6379
Password =
MaxIdle = 30
MaxActive = 30
IdleTimeout = 200
EXPIRES = 60
POSTSTIMEOUT = 10
```

### é…ç½®è¯´æ˜ğŸš€

#### mode

è¿è¡Œçš„æ¨¡å¼ å‚æ•°å¯é€‰debugï¼Œreleaseã€‚æµ‹è¯•æ¨¡å¼ï¼Œå‘å¸ƒæ¨¡å¼

#### run

è¿è¡Œæ—¶é…ç½®ï¼Œä¸»è¦é…ç½®ç¨‹åºè¿è¡Œæ—¶çš„æ—¥å¿—è·¯å¾„å’Œpidè·¯å¾„

æ­é…`-s start`å‘½ä»¤ä½¿ç”¨

`APP_NAME` ç¨‹åºåç§° å¸®åŠ©æ“ä½œç³»ç»Ÿæ‰¾å¯»æ­¤æœåŠ¡ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶

`APP_LOG` ç¨‹åºçš„è¿è¡Œæ—¥å¿—è·¯å¾„ æ”¯æŒç»å¯¹å’Œç›¸å¯¹è·¯å¾„ï¼ˆstartå‘½ä»¤éœ€è¦çš„ï¼‰

`APP_PID` ç¨‹åºçš„pidè·¯å¾„ æ”¯æŒç»å¯¹å’Œç›¸å¯¹è·¯å¾„

`APP_LOG_LEVEL` æ—¥å¿—è®°å½•çº§åˆ« å¯é€‰error info

`APP_LOG_FILE` åŸºäºæ–‡ä»¶çš„æ—¥å¿—è·¯å¾„

`APP_LOG_ENABLE`  æ˜¯å¦å¼€å¯æ–‡ä»¶æ—¥å¿— é»˜è®¤å…³é—­è¾“å‡ºåˆ°ç»ˆç«¯

#### app

åšå®¢æœåŠ¡ç›¸å…³çš„é…ç½®

`PAGE_SIZE` æ‡’åŠ è½½ä½¿ç”¨ ç”¨äºé…ç½®æ¯æ¬¡å“åº”çš„åšå®¢æ–‡ç« æ•°ç›® é»˜è®¤8

`MESSAGE_SIZE` æ‡’åŠ è½½ä½¿ç”¨ ç”¨äºé…ç½®æ¯æ¬¡å“åº”çš„ç•™è¨€æ•°ç›® é»˜è®¤5

`SORT_POST_BY` é…ç½®æŒ‰ç…§ä½•ç§è§„åˆ™æ’åºä½ çš„åšå®¢æ–‡ç«  æ”¯æŒ(id, name, date, update, title)å³ä¸»é”®ï¼Œæ–‡ç« urlï¼Œæ–‡ç« åˆ›å»ºæ—¶é—´ï¼Œæ–‡ç« æ›´æ–°æ—¶é—´ï¼Œæ–‡ä»¶æ ‡é¢˜ï¼Œ é»˜è®¤id

`SORT_POST_REVERSE` é…ç½®æ˜¯å¦ååºæ’åˆ—

`SORT_MESSAGE_BY` é…ç½®æŒ‰ç…§ä½•ç§è§„åˆ™æ’åºç•™è¨€ æ”¯æŒ(id, user, date)å³ä¸»é”®ï¼Œ ç•™è¨€ç”¨æˆ·ï¼Œç•™è¨€æ—¶é—´ é»˜è®¤id

`SORT_MESSAGE_REVERSE` é…ç½®æ˜¯å¦ååºæ’åˆ—

`SORT_COMMENT_BY`   é…ç½®æŒ‰ç…§ä½•ç§è§„åˆ™æ’åºè¯„è®º æ”¯æŒ(id, user, date, comment)å³ä¸»é”® ç•™è¨€ç”¨æˆ·ï¼Œç•™è¨€æ—¶é—´ï¼Œç•™è¨€å†…å®¹ é»˜è®¤id

`SORT_COMMENT_REVERSE` é…ç½®æ˜¯å¦ååºæ’åˆ—

`USE_CONTENT_AS_ABS` é…ç½®æ˜¯å¦ä½¿ç”¨æ–‡ç« æ­£æ–‡ä»£æ›¿æ‘˜è¦ï¼ˆä»…åœ¨æ‘˜è¦ä¸ºç©ºæ—¶ç”Ÿæ•ˆï¼‰

`MAX_CONTENT_LENGTH` é…ç½®ä½¿ç”¨æ–‡ç« æ­£æ–‡ä»£æ›¿æ‘˜è¦æ—¶åº”è¯¥æˆªå–çš„é•¿åº¦

`CUSTOM_EMPTY_ABS` é…ç½®å½“æ‘˜è¦ä¸ºç©ºæ—¶ï¼Œåº”è¯¥æ˜¾ç¤ºçš„é»˜è®¤æ‘˜è¦å†…å®¹ï¼ˆä½¿ç”¨æ–‡ç« å†…å®¹ä»£æ›¿æ‘˜è¦å¼€å¯æ—¶ æ­¤é…ç½®æ— æ•ˆï¼‰

`FAKE_STATIC_URL` é…ç½®æ˜¯å¦å¯ç”¨ä¼ªé™æ€åœ°å€ å¼€å¯åæ‰€æœ‰çš„åšå®¢æ–‡ç« åœ°å€å˜ä¸ºxxx.htmlçš„ä¼ªé™æ€é“¾æ¥

`ZHUANLAN_ID` ä¸“æ ç”Ÿæˆçš„urlä½¿ç”¨æ•°å­—idè¿˜æ˜¯ä½¿ç”¨è‹±æ–‡urlï¼ˆå½“è‹±æ–‡urlä¸å­˜åœ¨æ—¶è‡ªåŠ¨ä½¿ç”¨idï¼‰

`JWT_SECRET` json web tokenä½¿ç”¨çš„å¯†é’¥

`APP_REFER` é˜²æ­¢æ»¥ç”¨æ—¶å¼€å¯ å…è®¸é€šè¿‡çš„è¯·æ±‚å¤´refer å¤šä¸ªæ—¶ä½¿ç”¨ç©ºæ ¼åˆ†å¼€

`APP_HOST` é˜²æ­¢æ»¥ç”¨æ—¶å¼€å¯ å…è®¸é€šè¿‡çš„è¯·æ±‚å¤´host å¤šä¸ªæ—¶ä½¿ç”¨ç©ºæ ¼åˆ†å¼€

`APP_DOMAIN` ç”¨äºç”Ÿæˆcookieæ—¶ç¡®å®šcookieåŸŸåï¼Œåœ¨è¿™é‡Œé…ç½®ä½ çš„åšå®¢åŸŸå

`ALLOW_IE` æ˜¯å¦å…è®¸æ—§ç‰ˆIEæµè§ˆå™¨è®¿é—®æœ¬æœåŠ¡ 0ç¦æ­¢ 1å…è®¸

#### server

æœåŠ¡å™¨ç›¸å…³é…ç½®

`HTTP_PORT` æœåŠ¡è¿è¡Œçš„ç«¯å£

`READ_TIMEOUT`  æœ€å¤§è¯»å–è¶…æ—¶æ—¶é—´

`WRITE_TIMEOUT` æœ€å¤§å†™å…¥è¶…æ—¶æ—¶é—´

`CLUSTER` æ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼ 0å…³é—­ 1å¼€å¯

`STATIC_ROUTER` æ˜¯å¦ä½¿ç”¨blogä»£ç†å‰ç«¯çš„é™æ€æ–‡ä»¶ åœ¨æœ¬æœºæµ‹è¯•æ—¶å¯ä»¥ä½¿ç”¨ éƒ¨ç½²æ—¶å»ºè®®ä½¿ç”¨nginxæ‰˜ç®¡é™æ€æ–‡ä»¶ï¼ˆå¼€å¯ååœ¨conf/router.jsonæ–‡ä»¶ä¸­æ·»åŠ éœ€è¦æ‰˜ç®¡çš„æ–‡ä»¶è·¯ç”±ï¼‰

`HIDE_DB_LOG` æ¯æ¬¡å¯åŠ¨æ—¶æ˜¯å¦è¾“å‡ºæ•°æ®åº“åˆå§‹åŒ–æ—¥å¿— é»˜è®¤è¾“å‡º

#### admin

åå°æ§åˆ¶é¡µé¢ç›¸å…³é…ç½®

`ADMIN` ç®¡ç†å‘˜ç”¨æˆ·å

`PASSWD` ç®¡ç†å‘˜å¯†ç 

`COOKIE_MAX_AGE` ç”¨æˆ·è®¤è¯çš„cookieè¶…æ—¶æ—¶é—´ é»˜è®¤1800s

#### mysql

mysqlæ•°æ®åº“å®šåˆ¶é…ç½®

#### sqlite

sqliteæ•°æ®åº“é…ç½®

`DB` æœåŠ¡çš„sqliteæ•°æ®åº“ä½ç½®

#### middle

ä¸­é—´ä»¶ç›¸å…³é…ç½®

`UV` æ˜¯å¦å¼€å¯å…¨å±€è®¿é—®é‡ç»Ÿè®¡ 0å…³é—­ 1å¼€å¯

`POST_VIEW` æ˜¯å¦å¼€å¯æ–‡ç« çš„è®¿é—®é‡ç»Ÿè®¡ 0å…³é—­ 1å¼€å¯

`SIMPLE_AUTH` æ˜¯å¦å¼€å¯ç®€å•è¯·æ±‚è¿‡æ»¤ï¼Œç”¨äºé˜²æ­¢æ¥å£æ»¥ç”¨ ä»…å…è®¸æŒ‡å®šreferå’Œhostè¯·æ±‚é€šè¿‡

`CORS` æ˜¯å¦å¼€å¯è·¨åŸŸè¯·æ±‚ æ³¨æ„å…³é—­æ—¶æ¥è‡ªä¸åŒåŸŸçš„è¯·æ±‚ä¼šè¢«æ‹¦æˆª

`USEREDIS` æ˜¯å¦å¯ç”¨rediså‰ç½®ç¼“å­˜ éœ€è¦é…ç½®redis

`TRY_FILE` åœ¨ä¸ä½¿ç”¨nginxç›´æ¥ç”±æœ¬æœåŠ¡ä»£ç†å‰ç«¯é¡µé¢æ—¶ç”Ÿæ•ˆç±»ä¼¼nginxçš„`try_file`æŒ‡ä»¤

`TRY_FILE_INDEX` é‡å®šå‘çš„å‰ç«¯ä¸»é¡µæ–‡ä»¶

> æ³¨æ„âš ï¸ï¼šç”±äºtryæœºåˆ¶ç›®å‰ä¸å¤Ÿå®Œå–„ï¼Œåªèƒ½è‡ªåŠ¨è·å–æ‰€æœ‰é/apiçš„è¯·æ±‚é‡å®šå‘åˆ°å‰ç«¯é¡µé¢ï¼Œé™æ€èµ„æºè·¯å¾„å¦‚ï¼šjs / csså¹¶æœªæ³¨å†Œåœ¨blogä¸­ä¼šå¯¼è‡´æ— æ³•æ­£å¸¸ä½¿ç”¨æ‰€ä»¥éœ€è¦æ­é…`router.json`ä½¿ç”¨
>
> ä½ åªéœ€è¦ç®€å•çš„é…ç½®é™æ€èµ„æºè·¯å¾„ å¹¶ä¸”å¼€å¯`STATIC_ROUTER`å³å¯
>
> ```json
>   [{
>     "path": "/css",
>     "type": "dir",
>     "alias": "dist/css"
>   }]
> ```
>
> 

#### redis

redisç›¸å…³é…ç½®

`Host` redisçš„åœ°å€
`Password` redisçš„å¯†ç ä¸ºç©ºæ—¶ ä¸éœ€è¦å¡«å†™
`MaxIdle` = redisæœ€å¤§ç©ºé—²
`MaxActive` = redisè¿æ¥æ± æœ€å¤§è¿æ¥æ•°
`IdleTimeout` = redisæœ€å¤§ç©ºé—²è¶…æ—¶æ—¶é—´
`EXPIRES` = rediså†…éƒ¨é”®å€¼å¯¹è¿‡æœŸæ—¶é—´ å•ä½s
`POSTSTIMEOUT` = æœ€å¤§è¯·æ±‚è¶…æ—¶æ—¶é—´

## é»˜è®¤é…ç½®æ–‡ä»¶

é¦–æ¬¡å¯åŠ¨æ—¶å¦‚æœä¸å­˜åœ¨é…ç½®æ–‡ä»¶ ä¼šè‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶è·¯å¾„ä¸º`conf/app.ini`

è¿™åœ¨dockerå®¹å™¨ä¸­ä½¿ç”¨æ—¶ï¼Œå…¶ç»å¯¹è·¯å¾„ä¸º`/app/conf/app.ini` å› ä¸ºé»˜è®¤çš„è¿è¡Œç¨‹åºä½äº`/app`

## å¦‚ä½•æ‰˜ç®¡é™æ€æ–‡ä»¶ğŸŒ´

æœ¬æœåŠ¡æ”¯æŒç›´æ¥æ‰˜ç®¡å‰ç«¯çš„é™æ€æ–‡ä»¶ï¼Œè®©ä½ æ— éœ€ä½¿ç”¨nginxçš„åå‘ä»£ç†æœºåˆ¶

æ­¤åŠŸèƒ½åº”è¯¥ä»…ä½œä¸ºæœ¬æœºæµ‹è¯•ä½¿ç”¨è€Œéæ­£å¼çš„å‘å¸ƒç‰ˆæœ¬

**conf/router.json**

å®šä¹‰è¿™ä¸ªæ•°ç»„æ–‡ä»¶ åœ¨å†…éƒ¨å®šä¹‰å¹¶å®ç°ä½ çš„è·¯ç”±

```json
[
  {
    "path": "/",
    "type": "file",
    "alias": "dist/index.html"
  },
  {
    "path": "/about",
    "type": "try",
    "alias": "dist/index.html"
  },
  {
    "path": "/img",
    "type": "dir",
    "alias": "dist/img"
  }
]    
```

è·¯ç”±é…ç½®åˆ†ä¸ºä¸‰ä¸ªå‚æ•°`path`, `type`, `alias` 

`path` è·¯ç”±çš„ç»å¯¹è·¯å¾„

`type` è·¯ç”±ç±»å‹ fileå³å•æ–‡ä»¶æ‰˜ç®¡ï¼Œdirå³æ‰˜ç®¡ä¸€ä¸ªæ–‡ä»¶å¤¹ å®ç°åŒnginxçš„aliasï¼Œtryå³éœ€è¦å°†è¯·æ±‚é‡å®šå‘åˆ°ä¸»é¡µçš„è·¯ç”±

tryå‚æ•°è§£é‡Šï¼š

å®ç°ç±»ä¼¼nginxçš„`try_files`å‚æ•°ï¼Œåœ¨è¯·æ±‚çš„è·¯ç”±å®é™…ä¸å­˜åœ¨äºåç«¯æ—¶å°†è·¯ç”±äº¤ç»™å‰ç«¯çš„htmlé¡µé¢å¤„ç†ã€‚ä¾‹å¦‚vue-routerè¿™ç§å‰ç«¯è·¯ç”±çŠ¶ä½“ç»„ä»¶ï¼Œæœ¬æœåŠ¡çš„å¯¹äºæ­¤åŠŸèƒ½çš„å®ç°å¹¶ä¸è¶³å¤Ÿæ™ºèƒ½ï¼Œéœ€è¦ä½ æŒ‡å®šéœ€è¦è¿”å›å‰ç«¯å¤„ç†çš„è·¯ç”±

å½“`middle`ä¸­çš„`TRY_FILE`å¼€å¯æ—¶ åŒæ—¶ä¹Ÿæ”¯æŒæœ¬jsonæ–‡ä»¶ä¸­å®šä¹‰çš„è·¯ç”±

`alias` æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„çœŸå®è·¯å¾„ æ”¯æŒç»å¯¹å’Œç›¸å¯¹è·¯å¾„ï¼Œç›¸å¯¹è·¯å¾„ä»¥æœ¬äºŒè¿›åˆ¶ç¨‹åºæ‰€åœ¨è·¯å¾„ä¸º`.`

ç¤ºä¾‹ï¼štypeä¸ºdiræ—¶ å‡è®¾pathé…ç½®ä¸º`/img` æ­¤æ—¶è®¿é—®`/img/test.png`å®é™…è¯·æ±‚æ–‡ä»¶ä¸º`dist/img/test.png`

## å®šåˆ¶å‰ç«¯é¡µé¢ğŸŒ

åšå®¢æœåŠ¡çš„å‰ç«¯é…ç½®æŒ‡å¯¼æ–‡æ¡£

åšå®¢å‰ç«¯æœåŠ¡ç”±vueæŠ€æœ¯æ ˆç¼–å†™ æ”¯æŒç•Œé¢çš„å®šåˆ¶åŒ–

### ä½¿ç”¨æ–¹å¼

éœ€è¦å®šä¹‰è¯·cloneæœ¬é¡¹ç›®çš„frontåˆ†æ”¯ è¿›è¡Œä¿®æ”¹ç¼–è¯‘

```bash
git clone https://github.com/Landers1037/blog.git -b br_front
```

### å®šåˆ¶å±äºè‡ªå·±çš„æœåŠ¡

### å®šåˆ¶é¡µé¢

**custom.js**

```javascript
// å¯è‡ªç”±å®šåˆ¶çš„é¡¹ç›®
// åœ¨æ‰“åŒ…çš„æ—¶å€™ä½¿ç”¨
const customData = {
    api_url: "http://127.0.0.1:5000",
    author: "Landers",
    top_banner: "Landers1037",
    top_span: "Never Stop Debugging",
    site_name: "renj.io",
    site_url: "http://renj.io",
    http_prefix: prefix,
    site_domain: "blog.renj.io",
    github: "landers1037",
    project: "mgek.cc",
    project_des: "Mgeké¡¹ç›®è®°å½•ç”Ÿæ´»ä¸­çš„çµæ„Ÿ",
    project_url: "http://mgek.cc",
    bottom_tag: "By Landers",
    bottom_url: "http://renj.io",
    bottom_tag2 : "Github",
    bottom_url2: "https://landers1037.github.io",
    bottom_span: "Golang & Vue",
    email: "mail@renj.io",
    start_year: "2017",
    start_date: "2017/7/1",
    dashboard_count: 5,
    message_duration: 1500,
    loading_duration: 1000
}
```

### å‚æ•°è§£æâš™ï¸

`api_url` éœ€è¦è¯·æ±‚çš„åç«¯æ¥å£åœ°å€ æ­£å¼å‘å¸ƒæ—¶ä¾‹å¦‚`https://api.xxx.com`

`author` ä½œè€…åç§° æ˜¾ç¤ºåœ¨é¡µé¢å³ä¾§æ çš„ä½œè€…å å†™ä¸Šä½ çš„æ˜µç§°

`top_banner` é¡¶éƒ¨ä¸€çº§æ ‡é¢˜

`top_span` é¡¶éƒ¨çš„è‡ªå®šä¹‰æ ‡è¯­

`site_name` å³è¾¹æ å¯ä»¥è‡ªå®šä¹‰çš„ä½ çš„ç½‘ç«™åç§°

`site_url` å³è¾¹æ å¯ä»¥è‡ªå®šä¹‰çš„ä½ çš„ç½‘ç«™åœ°å€ ç‚¹å‡»åå¯ä»¥è·³è½¬

`http_prefix` åˆ¤æ–­å½“å‰é¡µé¢ä¸ºhttpè¿˜æ˜¯https

`site_domain` ç”¨äºç”Ÿæˆæ–‡ç« uriæ—¶ä½¿ç”¨çš„è‡ªå®šä¹‰åŸŸå

`github` ä½ çš„githbåç§° åªéœ€è¦ä½ çš„è´¦æˆ·åç§°

`project` å³è¾¹æ å¯ä»¥å®šåˆ¶çš„ä½ çš„é¡¹ç›®åç§°

`project_url` å³è¾¹æ å¯ä»¥å®šåˆ¶çš„ä½ çš„é¡¹ç›®url å¯ä»¥å¡«ä½ çš„github **ä¸å¡«å†™åˆ™ä¸ä¼šè·³è½¬**

`project_des` å³è¾¹æ å…³äºä½ çš„é¡¹ç›®çš„æè¿°

`bottom_tag`åº•éƒ¨æ ‡ç­¾ å·¦æ ‡ç­¾åç§°

`bottom_url` åº•éƒ¨æ ‡ç­¾ å·¦æ ‡ç­¾çš„urlä¸ºç©ºæ—¶åˆ™å¿½ç•¥ å¦åˆ™å¯ä»¥ç‚¹å‡»è·³è½¬

`bottom_tag2` åº•éƒ¨æ ‡ç­¾ å³æ ‡ç­¾çš„åç§°

`bottom_url2` åº•éƒ¨æ ‡ç­¾ å³æ ‡ç­¾çš„urlä¸ºç©ºæ—¶åˆ™å¿½ç•¥ å¦åˆ™å¯ä»¥ç‚¹å‡»è·³è½¬

`bottom_span` åº•éƒ¨å­æ ‡ç­¾ è‡ªå®šä¹‰å†…éƒ¨è¯­å¥æ”¯æŒemoji **ä¸ºç©ºæ—¶åˆ™ä¸æ˜¾ç¤º**

`email` ä½ çš„ç”µå­é‚®ç®±

`start_year`  æ˜¾ç¤ºåœ¨çŠ¶æ€å¼¹æ¡†ä¸­çš„å¼€å§‹å¹´ä»½ è¯·åœ¨è¿™é‡Œå¡«ä¸Šå¼€å§‹å†™åšå®¢çš„å¹´ä»½

`start_date` ç”¨äºè®¡ç®—å…·ä½“çš„è·ç¦»å¼€å§‹å†™åšå®¢çš„æ—¶é—´ è¯·å¡«å†™å¦‚ä¸‹æ ¼å¼`YYYY/mm/dd`

`dashboard_count` è®¾ç½®ç‚¹å‡»å¤´åƒåç»è¿‡å¤šå°‘æ¬¡è®¡æ•°æ‰ä¼šè¿›å…¥åå°æ§åˆ¶é¡µé¢ï¼Œå› ä¸ºæœ¬åšå®¢ä¸æä¾›æ˜¾å¼çš„ç›´æ¥ç™»é™†é¡µé¢ï¼Œæ‰€ä»¥åœ¨ç»è¿‡æ­£ç¡®ç‚¹å‡»æ¬¡æ•°åæ‰ä¼šæ˜¾ç¤ºç®¡ç†å‘˜çš„ç™»é™†é¡µé¢

æ–°å¢

`message_duration` ç”¨äºæ§åˆ¶å…¨å±€çš„messageboxæ˜¾ç¤ºéšè—æ—¶é—´ å•ä½ms

`loading_duration` ç”¨äºæ§åˆ¶å…¨å±€çš„åŠ è½½èƒŒæ™¯ç­‰å¾…æ—¶é—´ å•ä½ms

### å®šåˆ¶æ ·å¼ğŸ‘—

**custom.css**

åœ¨æ­¤æ–‡ä»¶ä¸­å®šåˆ¶ä½ çš„æ ·å¼ æ³¨æ„è¿™é‡Œå®šä¹‰çš„æ ·å¼æ—¶å…¨å±€ç”Ÿæ•ˆçš„

```css
// åšå®¢æ–‡ç« ä»¥åŠæ‘˜è¦ä¸­å‡ºç°çš„codeä»£ç å—é«˜äº®é¢œè‰²
.markdown-body p code{
    background-color: #808080;
    color: #ffffff;
}

// ä¸»é¡µçš„åšå®¢æ ‡é¢˜é¢œè‰²
.post .post-a{
    color: #409eff;
}

// ä¸»é¡µçš„åšå®¢æ ‡é¢˜åœ¨é¼ æ ‡æ”¾ç½®æ—¶å˜åŒ–çš„é¢œè‰²
.post .post-a:hover{
    color: #2f343f;
}

// ä¸»é¡µçš„åšå®¢æ‘˜è¦ä¸­æ‘˜è¦æ–‡å­—çš„é¢œè‰²
.post .abstract{
    color: #3f3f3f;
}

// å³è¾¹æ ä¸­çš„æ ‡ç­¾ä¸»é¢˜é¢œè‰²
.el-tag--dark.el-tag--success{
    background-color: #6aaaaa;
    border-color: #6aaaaa;
}
```

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼š

åœ¨æ­¤æ–‡ä»¶ä¸­é»˜è®¤é¢„ç½®çš„ä¸»é¢˜å¤– ä½ è¿˜å¯ä»¥é€šè¿‡f12æŸ¥çœ‹é¡µé¢æºç è‡ªç”±å®šåˆ¶é¡µé¢

åœ¨æ­¤æ–‡ä»¶ä¸­å†™çš„æ‰€æœ‰csséƒ½ä¼šè¦†ç›–ä¹‹å‰çš„æ ·å¼

### å®šåˆ¶ç½‘é¡µhead

**.env**

```bash
VUE_APP_TITLE = "Landers 1037"
VUE_APP_DES = "Landersçš„åšå®¢ï¼Œç”±Vueï¼ŒGinç¼–å†™ï¼Œç‰ˆæƒæ‰€æœ‰å½’å±Renj.io Landers"
VUE_APP_ID = "app_blog"
VUE_APP_AUTHOR = "Landers of renj.io"
VUE_APP_MOBILE_TITLE = "Blog"
```

å®šä¹‰å‰ç«¯çš„ç¯å¢ƒå˜é‡æ–‡ä»¶å¯ä»¥åœ¨ç¼–è¯‘å®Œæˆåè‡ªåŠ¨æ ¹æ®å®šä¹‰çš„å˜é‡ç”Ÿæˆheadéƒ¨åˆ†

```html
<title><%= VUE_APP_TITLE %></title>
```



## è¿ç§»ğŸš›

æ€ä¹ˆä»markdownæ–‡ä»¶è¿ç§»åˆ°æœ¬æœåŠ¡ï¼Ÿ

æœ¬æœåŠ¡æä¾›ä¸€äº›ç®€å•æ˜“ç”¨çš„è¿ç§»å·¥å…· è®©ä½ ä¸€é”®ä»mdè½¬ç§»ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯hexoç”Ÿæˆçš„mdæ–‡ä»¶

é‚£ä¹ˆæ­å–œä½ çš„mdæ–‡ä»¶è§„èŒƒå’Œæœ¬æœåŠ¡ç›¸ä¼¼

### mdæ–‡ä»¶è§„èŒƒğŸ“ƒ

```markdown
---
title: æ–‡ç« æ ‡é¢˜
name: æ–‡ä»¶å
date: 2021-02-27 01:09:52
id: æ–‡ç« çš„id
tags: æ ‡ç­¾
categories: åˆ†ç±»
abstract: æš‚æ—¶æ— ç”¨
---
æ‘˜è¦
<!--more-->

æ­£æ–‡
---
è¿™æ˜¯åˆ†å‰²çº¿
---
```

mdæ–‡ä»¶å¤´éƒ¨ä½¿ç”¨å’Œhexoç±»ä¼¼çš„`yaml`æ ‡ç­¾ä¿¡æ¯

æ³¨æ„ï¼šæš‚ä¸æ”¯æŒæ¢è¡Œ ä¸€è¡Œä¸ºä¸€ä¸ªmetaä¿¡æ¯

`title` æ–‡ç« è¦æ˜¾ç¤ºåœ¨ä¸»é¡µçš„æ ‡é¢˜

`name` æ–‡ç« çš„å”¯ä¸€åç§° ç”¨äºç”Ÿæˆè·³è½¬url ä¸ºé¿å…ä¸­æ–‡urlçš„è½¬ä¹‰è¯·ä½¿ç”¨è‹±æ–‡

`id` è‡ªåŠ¨ç”Ÿæˆ æ–‡ç« çš„é¡ºåº æ˜¾ç¤ºæ–‡ç« çš„æ—¶å€™ä½¿ç”¨

`tags` æ•°ç»„å½¢å¼[tag1, tag2, tag3]

`categories` æ•°ç»„å½¢å¼[cate1, cate2, cate3]

`abstract` æš‚æ—¶æ— ç”¨ æ‘˜è¦ å› ä¸ºæ‘˜è¦ä»ä¸‹é¢çš„å†…å®¹ä¸­è¯»å–

#### æ‘˜è¦è·å–

åœ¨æ–‡ç« ä¸­å®šä¹‰çš„`<!--more-->` moreå‰é¢çš„å†…å®¹å°±æ˜¯æ‘˜è¦ä¿¡æ¯

æ‘˜è¦ä¹Ÿå¯ä»¥ä¸ºmarkdownæ–‡æœ¬ æ”¯æŒè¯­æ³•é«˜äº®

ä¸å­˜åœ¨æˆ–è€…ä¸ºç©ºæ—¶ åˆ™é»˜è®¤æ²¡æœ‰æ‘˜è¦



#### æ­£æ–‡å†…å®¹

æ­£æ–‡ = æ‘˜è¦ + æ­£æ–‡å†…å®¹

æ‰€ä»¥è¯´æ‘˜è¦ä¹Ÿæ˜¯æ–‡ç« çš„ä¸€éƒ¨åˆ†

#### è¿ç§»å·¥å…·

å½“å‰æ”¯æŒå…¨é‡å’Œå¢é‡è¿ç§»çš„å·¥å…·`jjtool`

æ”¯æŒå…¨é‡è¿ç§»çš„å·¥å…·pythonè„šæœ¬`migrate_blog.py`

### è¿ç§»å›¾åºŠåŸºç¡€åœ°å€

blogæä¾›å‘½ä»¤è¡Œå·¥å…·å¸®åŠ©å®Œæˆæ–‡ä»¶ä¸­çš„å›¾ç‰‡é“¾æ¥è¿ç§»å·¥ä½œ

```bash
blog -m old_link new_link
```

ä½¿ç”¨`-m`å‚æ•°æŒ‡å®šè¿ç§»ï¼Œå¡«å…¥æ—§çš„é“¾æ¥åœ°å€å’Œæ–°çš„é“¾æ¥åœ°å€å³å¯å®Œæˆè¿ç§»

## ä½¿ç”¨dockeré•œåƒ

ä½ å¯ä»¥è‡ªè¡Œæ„é€ é•œåƒæˆ–è€…æ˜¯ä½¿ç”¨dockerhubä¸Šçš„é•œåƒ

```bash
docker pull landers1037/blog:v5.4

docker run -d -p 5000:5000 -v /home/conf:/app/conf -v /home/data:/app/data landers1037/blog:v5.4
```

blogéœ€è¦æŒ‚è½½ä¸¤ä¸ªè·¯å¾„confå’Œdata

confç›®å½•ç”¨äºç¼–å†™ç”¨æˆ·è‡ªå®šä¹‰çš„é…ç½®æ–‡ä»¶

dataç”¨äºå­˜æ”¾è¿è¡Œæ—¶çš„æ•°æ®åº“å’Œæ—¥å¿—æ•°æ®ï¼Œä½ å¯ä»¥éšæ—¶å¤‡ä»½æ­¤æ•°æ®

é»˜è®¤htmlé™æ€æ–‡ä»¶ä¼šæ‰“åŒ…åœ¨å®¹å™¨å†…éƒ¨çš„`/app/html`è·¯å¾„ï¼Œå¦‚æœä½ æƒ³è‡ªè¡Œç¼–è¯‘å‰ç«¯æ–‡ä»¶è¯·æŒ‚è½½æ­¤è·¯å¾„

```bash
-v /home/html:/app/html
```

åœ¨ä¸æŒ‚è½½confç›®å½•æ—¶blogä¸ä¼šä¸»åŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶ä¼šå¯¼è‡´æ— æ³•è¿è¡Œï¼Œè¯·é¢„å…ˆå®šä¹‰å¥½app.inié…ç½®æ–‡ä»¶

`app.ini`

```ini
# config for app
# mode can be debug/release
[mode]
RUN_MODE = release

[run]
APP_NAME = blog
APP_PID = /app/data/blog.pid
APP_LOG = /app/data/blog.log
APP_LOG_LEVEL = error
APP_LOG_FILE = /app/data/app.log
APP_LOG_ENABLE = 1

[app]
PAGE_SIZE = 8
MESSAGE_SIZE = 5
SORT_POST_BY = id
SORT_POST_REVERSE = 1
SORT_MESSAGE_BY = id
SORT_MESSAGE_REVERSE = 1
SORT_COMMENT_BY = id
SORT_COMMENT_REVERSE = 1
USE_CONTENT_AS_ABS = 1
MAX_CONTENT_LENGTH = 120
CUSTOM_EMPTY_ABS = <code>Sorry</code>è¯¥æ–‡ç« æš‚æ— æ¦‚è¿°
FAKE_STATIC_URL = 0
ZHUANLAN_ID = 1
JWT_SECRET = 10086call
APP_REFER = blog.renj.io
APP_HOST = 127.0.0.1 blog.renj.io
APP_DOMAIN = blog.renj.io
APP_ALLOW_IE = 0

[server]
HTTP_PORT = 5000
READ_TIMEOUT = 60
WRITE_TIMEOUT = 60
CLUSTER = 1
STATIC_ROUTER = 1

[admin]
USERNAME = admin
PASSWD = 12345
COOKIE_MAX_AGE = 3600
STOP_ADMIN = 0

[mysql]
TYPE = mysql
USER = root
PASSWORD = 123456
HOST = 127.0.0.1:3306
NAME= blog
TABLE_PREFIX = blog_

# where db is
[sqlite]
DB = /app/data/blog.db

# if use middleware set 1
[middle]
UV = 0
POSTVIEW = 0
SIMPLEAUTH = 0
USEREDIS = 0
CORS = 1
TRY_FILE = 1
TRY_FILE_INDEX = /app/html/index.html

[redis]
Host = 127.0.0.1:6379
Password =
MaxIdle = 30
MaxActive = 30
IdleTimeout = 200
EXPIRES = 60
POSTSTIMEOUT = 10
```

ä¸ºäº†ä¿æŠ¤ä½ çš„æ•°æ®`/app/data`è·¯å¾„æœ€å¥½é€‰æ‹©éå®¹å™¨å†…éƒ¨å­˜å‚¨ç©ºé—´

**é»˜è®¤çš„é…ç½®æ–‡ä»¶ä¼šæ”¾ç½®åœ¨/app/exampleç›®å½•ä¸‹**

### ä½¿ç”¨ä¸åŒå‘½ä»¤å¯åŠ¨å®¹å™¨

é»˜è®¤çš„é‡å¯æ–¹å¼æ˜¯æŒ‡å®šç«¯å£çš„å‰å°è¿è¡Œï¼Œä½¿ç”¨dockerçš„`-d`å‚æ•°ä»¥ä¿æŒåå°è¿è¡Œ

ä½ å¯ä»¥ä½¿ç”¨blogæ”¯æŒçš„å‘½ä»¤è¡Œå‚æ•°

## Bench mark

å‹åŠ›æµ‹è¯•

#### wrkåŸºå‡†æµ‹è¯•

| æ¨¡å¼   | æ¥å£       | å¹¶å‘è¿æ¥æ•° | ç»“æœ     | å‹åŠ›å€¼         |
| ------ | ---------- | ---------- | -------- | -------------- |
| å¹³å‡   | /api/test/ | 8.98k/s    | 21.38ms  | 1çº¿ç¨‹ 100å¹¶å‘  |
| æœ€å¤§   | /api/test/ | 15.39k/s   | 263.18ms | 1çº¿ç¨‹ 100å¹¶å‘  |
| æ ‡å‡†å·® | /api/test/ | 6.14k/s    | 29.16ms  | 1çº¿ç¨‹ 100å¹¶å‘  |
| å¹³å‡   | /api/test/ | 6.07k/s    | 56.40ms  | 2çº¿ç¨‹ 1000å¹¶å‘ |
| æœ€å¤§   | /api/test/ | 8.33k/s    | 737.51ms | 2çº¿ç¨‹ 1000å¹¶å‘ |
| æ ‡å‡†å·® | /api/test/ | 1.33k/s    | 71.62ms  | 2çº¿ç¨‹ 1000å¹¶å‘ |

```bash
Running 10s test @ http://127.0.0.1:5000/hello
  1 threads and 100 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    53.38ms   54.25ms 496.91ms   85.81%
    Req/Sec     2.31k     2.59k   13.93k    93.00%
  22963 requests in 10.01s, 10.75MB read
Requests/sec:   2295.02
Transfer/sec:      1.07MB
```

#### webbenchåŸºå‡†æµ‹è¯•

| å®¢æˆ·ç«¯æ•° | æµ‹è¯•æ—¶é•¿(s) | é€Ÿåº¦             | å“åº”ç»“æœ ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ |
| -------- | ----------- | ---------------- | ---------------------- |
| 100      | 10          | 88530 pages/min  | 14755/0                |
| 200      | 10          | 104454 pages/min | 17409/0                |
| 300      | 10          | 91830 pages/min  | 15305/0                |
| 100      | 20          | 89790 pages/min  | 29930/0                |
| 500      | 20          | 88587 pages/min  | 29529/0                |
| 200      | 50          | 46214 pages/min  | 38512/0                |

```bash
Webbench - Simple Web Benchmark 1.5
Copyright (c) Radim Kolar 1997-2004, GPL Open Source Software.

Request:
GET /hello HTTP/1.0
User-Agent: WebBench 1.5
Host: 127.0.0.1


Runing info: 100 clients, running 10 sec.

Speed=88530 pages/min, 724470 bytes/sec.
Requests: 14755 susceed, 0 failed.
```

## ç¼–è¯‘

æœ¬é¡¹ç›®ç°å·²ä½¿ç”¨go modæ–¹å¼ç®¡ç†

### ä½¿ç”¨ä¼ ç»Ÿçš„æ„å»ºæ–¹å¼build_blog.sh

å¦‚æœä½ çš„ä»£ç†æœ‰é—®é¢˜ ä½ å¯ä»¥

```bash
export GOPROXY=https://goproxy.io,direct
```

```bash
root@ubuntu:/home/code/go/src/blog# bash build_blog.sh 
GOPATH: /home/code/go
GOPROXY: https://goproxy.io,direct
CGO_ENABLED: 1
GO111MODULE: on
start to build app
done
```

### é€šè¿‡makeç¼–è¯‘

```bash
make build
```



## dependency

æœ¬é¡¹ç›®ä¾èµ–

- gin
- godotenv
- go-ini
- gorm
- vue